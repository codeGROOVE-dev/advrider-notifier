<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Manage Subscriptions</title>
	<link rel="stylesheet" href="/media/style.css">
	<style>
		h1 {
			text-align: center;
		}
		.email-info {
			text-align: center;
			margin-bottom: 32px;
			padding-bottom: 24px;
			border-bottom: 1px solid #eee;
		}
		.thread-item form {
			margin: 0;
		}
		.empty {
			text-align: center;
			padding: 40px;
			color: #999;
		}
		.empty a {
			margin-top: 16px;
		}
		.footer {
			text-align: center;
			margin-top: 32px;
			padding-top: 24px;
			border-top: 1px solid #eee;
		}
		.footer a {
			margin: 0;
		}
	</style>
</head>
<body>
	<div class="container">
		<h1>Manage Subscriptions</h1>
		<div class="email-info">
			<p>Email: <strong>{{.Email}}</strong></p>
		</div>
		{{if .Threads}}
			<div class="thread-list">
				{{range .Threads}}
				<div class="thread-item">
					<div class="thread-url"><a href="{{.ThreadURL}}" target="_blank" rel="noopener noreferrer">{{.ThreadURL}}</a></div>
					<div class="thread-meta">Subscribed: {{.CreatedAt}}</div>
					<div class="thread-actions">
						<form method="POST">
							<input type="hidden" name="action" value="unsubscribe">
							<input type="hidden" name="token" value="{{$.Token}}">
							<input type="hidden" name="thread_id" value="{{.ThreadID}}">
							<button type="submit" class="secondary">Unsubscribe</button>
						</form>
					</div>
				</div>
				{{end}}
			</div>
			<div class="unsubscribe-all">
				<h2>Remove All Subscriptions</h2>
				<p>This will permanently unsubscribe you from all threads.</p>
				<form method="POST">
					<input type="hidden" name="action" value="unsubscribe_all">
					<input type="hidden" name="token" value="{{.Token}}">
					<button type="submit" class="secondary">Unsubscribe from All Threads</button>
				</form>
			</div>
		{{else}}
			<div class="empty">
				<p>No active subscriptions found.</p>
				<a href="/">Subscribe to a thread</a>
			</div>
		{{end}}
		<div class="footer">
			<a href="/">Subscribe to another thread</a>
		</div>
	</div>
</body>
</html>
